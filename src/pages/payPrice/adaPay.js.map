{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bf0382b4d045a0afeed7","webpack:///adaPay.js","webpack:///./payTool.js","webpack:///./AdaPay.js","webpack:///./mods.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","doPay","payment","payCallback","check","checkPayment","pay_channel","wxlitePay","pay_result","msg","query","litePayCallback","requestPayResult","query_url","then","res","catch","err","mods","payResult","unknown","result_info","pay_info","JSON","parse","expend","wx","requestPayment","timeStamp","nonceStr","package","signType","paySign","success","succeeded","fail","failed","params","channelArr","channelConfig","status","chackMsg","orderError","indexOf","channelError","prod_mode","otherError","_mods2","obj","default","_mods","payTool","_payTool2","_payTool","version","amountError","queryUrlError","payStatus","pending","timeout","cancel","paramError","result_status","result_message"],"mappings":"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","file":"adaPay.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AdaPay\"] = factory();\n\telse\n\t\troot[\"AdaPay\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bf0382b4d045a0afeed7","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AdaPay\"] = factory();\n\telse\n\t\troot[\"AdaPay\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _mods = __webpack_require__(2);\n\nvar _mods2 = _interopRequireDefault(_mods);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *  发起支付并监听支付返回结果\n * @param payment  支付数据\n * @param payCallback 支付结果回调 返回结果对象\n */\nfunction doPay(payment, payCallback) {\n  var result = {};\n\n  // 1、校验payment 必填：pay_channel，pay_amt 非必填：goods_title，goods_desc\n  var check = checkPayment(payment);\n  if (check) {\n    payCallback(check);\n    return;\n  }\n\n  //1、二维码主扫\n  if (payment.pay_channel === 'alipay_qr' || payment.pay_channel === 'wx_qr') {\n    // 主扫直接发起支付结果监听\n    wxlitePay(payment, function (pay_result) {\n      payCallback(pay_result);\n    });\n  } else if (payment.pay_channel === 'wx_lite') {\n    wxlitePay(payment, function (pay_result) {\n      payCallback(pay_result);\n    });\n  } else {\n    payCallback({\n      msg: '暂不支持该方式'\n    });\n  }\n}\n\nfunction query(payment, litePayCallback) {\n  requestPayResult(payment.query_url).then(function (res) {\n    litePayCallback(res);\n  }).catch(function (err) {\n    _mods2.default.payResult.unknown.result_info = {};\n    litePayCallback(_mods2.default.payResult.unknown);\n  });\n}\n\nfunction wxlitePay(payment, litePayCallback) {\n  var self = this;\n  // 微信 sdk \n  var pay_info = JSON.parse(payment.expend.pay_info);\n  // 调起微信支付api 当接口调用结束之后请求查询接口\n  wx.requestPayment({\n    timeStamp: pay_info.timeStamp,\n    nonceStr: pay_info.nonceStr,\n    package: pay_info.package,\n    signType: pay_info.signType,\n    paySign: pay_info.paySign,\n    success: function success(res) {\n      _mods2.default.payResult.succeeded.result_info = payment;\n      litePayCallback(_mods2.default.payResult.succeeded);\n    },\n    fail: function fail(res) {\n      _mods2.default.payResult.failed.result_info = payment;\n      litePayCallback(_mods2.default.payResult.failed);\n    }\n  });\n}\n\n// /**\n//  *  轮询支付结果\n//  */\n// function handlePayResult(query_url, timeout) {\n//   var idx = 0\n//   let self = this\n//   // 定时器id\n//   var intervalID = undefined\n//   let result_info = {}\n\n//   return new Promise(function (resolve, reject) {\n//     intervalID = setInterval(function () {\n//       if (idx >= timeout) {\n//         clearInterval(intervalID)\n\n//         mods.payResult.timeout.result_info = result_info\n//         resolve(mods.payResult.timeout)\n//       }\n//       idx = idx + 3;\n\n//       requestPayResult(query_url).then(function (res) {\n//         result_info = res.result_info\n\n//         if (res.result_code === mods.payStatus.succeeded || res.result_code === mods.payStatus.failed) { // 如果是支付成功或失败都结束查询 否则继续轮询\n//           clearInterval(intervalID)\n//           resolve(res)\n//         }\n//       })\n//     }, 3000)\n//   })\n// }\n\n// function requestPayResult(query_url) {\n//   return new Promise(function (resolve, reject) {\n//     let result = {} // 支付查询结果\n//     wx.request({\n//       url: query_url,\n//       header: {\n//         'content-type': 'application/json' // 默认值\n//       },\n//       success(res) {\n\n//         let data = res.data\n\n//         if (data.status === mods.payStatus.succeeded) { // 支付成功\n\n//           mods.payResult.succeeded.result_info = data\n//           resolve(mods.payResult.succeeded)\n//         }else if (data.status === mods.payStatus.pending) { // 支付中\n//           mods.payResult.pending.result_info = data\n//           resolve(mods.payResult.pending)\n//         } else {\n\n//           mods.payResult.unknown.result_info = data\n//           resolve(mods.payResult.unknown)\n//         }\n\n//       },\n//       fail(error) {\n//         if (error && error.response) {\n//           let data = error.response.data\n\n//           mods.payResult.failed.result_info = data\n//           resolve(mods.payResult.failed)\n//         }else{ // unknown 其他状态\n//             mods.payResult.unknown.result_info = {}\n//             resolve(mods.payResult.unknown)\n//         }\n//       }\n//     })\n//   })\n// }\n\nfunction checkPayment(params) {\n  var channelArr = _mods2.default.channelConfig;\n\n  if (params.status !== \"succeeded\") {\n    return _mods2.default.chackMsg.orderError;\n  }\n  if (channelArr.indexOf(params.pay_channel) < 0) {\n    // 验证传入的支付渠道是否正确\n    return _mods2.default.chackMsg.channelError;\n  }\n  if (params.prod_mode === 'false') {\n    return _mods2.default.chackMsg.otherError;\n  }\n\n  return undefined;\n}\n\nmodule.exports = {\n  doPay: doPay,\n  query: query\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _payTool = __webpack_require__(0);\n\nvar _payTool2 = _interopRequireDefault(_payTool);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar version = \"1.0.4\";\n\nfunction doPay(payment, payCallback) {\n  return _payTool2.default.doPay(payment, payCallback);\n}\n\nmodule.exports = {\n  doPay: doPay,\n  version: version\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar mods = {};\nmodule.exports = mods;\n\n// 支付渠道\n// alipay_qr:支付宝正扫\n// alipay_wap: 支付宝H5支付\n// wx_lite:微信小程序\nmods.channelConfig = [\"alipay_qr\", \"alipay_wap\", \"wx_lite\"];\n\n// payment参数校验结果\nmods.chackMsg = {\n    orderError: '发起支付失败',\n    channelError: '支付渠道参数错误',\n    amountError: '支付金额参数错误',\n    queryUrlError: '支付结果url参数未知'\n\n    // 支付状态值\n};mods.payStatus = {\n    succeeded: \"succeeded\",\n    failed: \"failed\",\n    pending: \"pending\",\n    timeout: \"timeout\",\n    cancel: \"unknown\",\n    unknown: \"unknown\",\n    paramError: \"paramError\"\n    // 支付结果对象\n};mods.payResult = {\n    succeeded: {\n        result_status: mods.payStatus.succeeded,\n        result_message: \"订单支付成功\",\n        result_info: {}\n    },\n\n    failed: {\n        result_status: mods.payStatus.failed,\n        result_message: \"订单支付失败\",\n        result_info: {}\n    },\n\n    pending: {\n        result_status: mods.payStatus.pending,\n        result_message: \"订单支付中\",\n        result_info: {}\n    },\n\n    timeout: {\n        result_status: mods.payStatus.timeout,\n        result_message: \"订单支付超时\",\n        result_info: {}\n    },\n\n    cancel: {\n        result_status: mods.payStatus.cancel,\n        result_message: \"支付取消\",\n        result_info: {}\n    },\n\n    unknown: {\n        result_status: mods.payStatus.unknown,\n        result_message: \"订单结果未知\",\n        result_info: {}\n    },\n\n    paramError: {\n        result_status: mods.payStatus.paramError,\n        result_message: \"参数错误\",\n        result_info: {}\n    }\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// adaPay.js","import mods from './mods.js'\n\n/**\n *  发起支付并监听支付返回结果\n * @param payment  支付数据\n * @param payCallback 支付结果回调 返回结果对象\n */\nfunction doPay(payment, payCallback) {\n  let result = {}\n  \n  // 1、校验payment 必填：pay_channel，pay_amt 非必填：goods_title，goods_desc\n  let check = checkPayment(payment)\n  if (check) {\n    payCallback(check)\n    return\n  }\n\n  //1、二维码主扫\n  if (payment.pay_channel === 'alipay_qr' || payment.pay_channel === 'wx_qr') {\n    // 主扫直接发起支付结果监听\n    wxlitePay(payment, (pay_result) => {\n      payCallback(pay_result)\n    })\n  } else if (payment.pay_channel === 'wx_lite'){\n    wxlitePay(payment, (pay_result) => {\n      payCallback(pay_result)\n    })\n  }else{\n    payCallback({\n      msg: '暂不支持该方式'\n    })\n  }\n}\n\nfunction query(payment, litePayCallback) {\n  requestPayResult(payment.query_url).then(function (res) {\n    litePayCallback(res)\n  }).catch(err => {\n    mods.payResult.unknown.result_info = {}\n    litePayCallback(mods.payResult.unknown)\n  })\n}\n\nfunction wxlitePay(payment, litePayCallback) {\n  let self = this\n  // 微信 sdk \n  let pay_info = JSON.parse(payment.expend.pay_info)\n  // 调起微信支付api 当接口调用结束之后请求查询接口\n  wx.requestPayment({\n    timeStamp: pay_info.timeStamp,\n    nonceStr: pay_info.nonceStr,\n    package: pay_info.package,\n    signType: pay_info.signType,\n    paySign: pay_info.paySign,\n    success(res) {\n      mods.payResult.succeeded.result_info = payment\n      litePayCallback(mods.payResult.succeeded)\n    },\n    fail(res) {\n      mods.payResult.failed.result_info = payment\n      litePayCallback(mods.payResult.failed)\n    }\n  })\n}\n\n// /**\n//  *  轮询支付结果\n//  */\n// function handlePayResult(query_url, timeout) {\n//   var idx = 0\n//   let self = this\n//   // 定时器id\n//   var intervalID = undefined\n//   let result_info = {}\n\n//   return new Promise(function (resolve, reject) {\n//     intervalID = setInterval(function () {\n//       if (idx >= timeout) {\n//         clearInterval(intervalID)\n\n//         mods.payResult.timeout.result_info = result_info\n//         resolve(mods.payResult.timeout)\n//       }\n//       idx = idx + 3;\n\n//       requestPayResult(query_url).then(function (res) {\n//         result_info = res.result_info\n        \n//         if (res.result_code === mods.payStatus.succeeded || res.result_code === mods.payStatus.failed) { // 如果是支付成功或失败都结束查询 否则继续轮询\n//           clearInterval(intervalID)\n//           resolve(res)\n//         }\n//       })\n//     }, 3000)\n//   })\n// }\n\n// function requestPayResult(query_url) {\n//   return new Promise(function (resolve, reject) {\n//     let result = {} // 支付查询结果\n//     wx.request({\n//       url: query_url,\n//       header: {\n//         'content-type': 'application/json' // 默认值\n//       },\n//       success(res) {\n        \n//         let data = res.data\n\n//         if (data.status === mods.payStatus.succeeded) { // 支付成功\n\n//           mods.payResult.succeeded.result_info = data\n//           resolve(mods.payResult.succeeded)\n//         }else if (data.status === mods.payStatus.pending) { // 支付中\n//           mods.payResult.pending.result_info = data\n//           resolve(mods.payResult.pending)\n//         } else {\n\n//           mods.payResult.unknown.result_info = data\n//           resolve(mods.payResult.unknown)\n//         }\n\n//       },\n//       fail(error) {\n//         if (error && error.response) {\n//           let data = error.response.data\n\n//           mods.payResult.failed.result_info = data\n//           resolve(mods.payResult.failed)\n//         }else{ // unknown 其他状态\n//             mods.payResult.unknown.result_info = {}\n//             resolve(mods.payResult.unknown)\n//         }\n//       }\n//     })\n//   })\n// }\n \nfunction checkPayment(params) {\n  let channelArr = mods.channelConfig\n  \n  if (params.status !== \"succeeded\") {\n    return mods.chackMsg.orderError\n  }\n  if (channelArr.indexOf(params.pay_channel) < 0) { // 验证传入的支付渠道是否正确\n    return mods.chackMsg.channelError\n  }\n  if (params.prod_mode === 'false') {\n    return mods.chackMsg.otherError\n  }\n\n  return undefined\n}\n\nmodule.exports = {\n  doPay,\n  query\n}\n\n\n// WEBPACK FOOTER //\n// ./payTool.js","import payTool from './payTool.js'\n\nconst version = \"1.0.4\";\n\nfunction doPay (payment, payCallback) {\n  return payTool.doPay(payment, payCallback)\n}\n\nmodule.exports = {\n  doPay,\n  version\n}\n\n\n// WEBPACK FOOTER //\n// ./AdaPay.js","var mods = {};\nmodule.exports = mods;\n\n// 支付渠道\n// alipay_qr:支付宝正扫\n// alipay_wap: 支付宝H5支付\n// wx_lite:微信小程序\nmods.channelConfig = [\"alipay_qr\", \"alipay_wap\", \"wx_lite\"]\n\n// payment参数校验结果\nmods.chackMsg = {\n    orderError: '发起支付失败',\n    channelError: '支付渠道参数错误',\n    amountError: '支付金额参数错误',\n    queryUrlError: '支付结果url参数未知'\n}\n\n// 支付状态值\nmods.payStatus = {\n    succeeded: \"succeeded\",\n    failed: \"failed\",\n    pending: \"pending\",\n    timeout: \"timeout\",\n    cancel: \"unknown\",\n    unknown: \"unknown\",\n    paramError: \"paramError\"\n}\n// 支付结果对象\nmods.payResult = {\n    succeeded: {\n        result_status: mods.payStatus.succeeded,\n        result_message: \"订单支付成功\",\n        result_info: {}\n    },\n\n    failed: {\n        result_status: mods.payStatus.failed,\n        result_message: \"订单支付失败\",\n        result_info: {}\n    },\n\n    pending: {\n        result_status: mods.payStatus.pending,\n        result_message: \"订单支付中\",\n        result_info: {}\n    },\n\n    timeout: {\n        result_status: mods.payStatus.timeout,\n        result_message: \"订单支付超时\",\n        result_info: {}\n    },\n\n    cancel: {\n        result_status: mods.payStatus.cancel,\n        result_message: \"支付取消\",\n        result_info: {}\n    },\n\n    unknown: {\n        result_status: mods.payStatus.unknown,\n        result_message: \"订单结果未知\",\n        result_info: {}\n    },\n\n    paramError: {\n        result_status: mods.payStatus.paramError,\n        result_message: \"参数错误\",\n        result_info: {}\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./mods.js"],"sourceRoot":""}